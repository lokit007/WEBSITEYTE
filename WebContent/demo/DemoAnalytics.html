<!DOCTYPE html>
<html>
<head>
<title>Embed API Demo</title>
<script>
	(function(i, s, o, g, r, a, m) {
		i['GoogleAnalyticsObject'] = r;
		i[r] = i[r] || function() {
			(i[r].q = i[r].q || []).push(arguments)
		}, i[r].l = 1 * new Date();
		a = s.createElement(o), m = s.getElementsByTagName(o)[0];
		a.async = 1;
		a.src = g;
		m.parentNode.insertBefore(a, m)
	})(window, document, 'script',
			'https://www.google-analytics.com/analytics.js', 'ga');

	ga('create', 'UA-76754568-1', 'auto');
	ga('send', 'pageview');
</script>
</head>
<body>

	<!-- Step 1: Create the containing elements. -->

	<section id="auth-button"></section>
	<section id="view-selector"></section>
	<section id="timeline"></section>

	<!-- Step 2: Load the library. -->

	<script>
		(function(w, d, s, g, js, fjs) {
			g = w.gapi || (w.gapi = {});
			g.analytics = {
				q : [],
				ready : function(cb) {
					this.q.push(cb)
				}
			};
			js = d.createElement(s);
			fjs = d.getElementsByTagName(s)[0];
			js.src = 'https://apis.google.com/js/platform.js';
			fjs.parentNode.insertBefore(js, fjs);
			js.onload = function() {
				g.load('analytics')
			};
		}(window, document, 'script'));
	</script>

	<script>
		gapi.analytics
				.ready(function() {

					// Step 3: Authorize the user.

					var CLIENT_ID = '674221974954-euu242fc90mhea7s296ede9l72plbufq.apps.googleusercontent.com';

					gapi.analytics.auth.authorize({
						container : 'auth-button',
						clientid : CLIENT_ID,
					});

					// Step 4: Create the view selector.

					var viewSelector = new gapi.analytics.ViewSelector({
						container : 'view-selector'
					});

					// Step 5: Create the timeline chart.

					var timeline = new gapi.analytics.googleCharts.DataChart({
						reportType : 'ga',
						query : {
							'dimensions' : 'ga:date',
							'metrics' : 'ga:sessions',
							'start-date' : '30daysAgo',
							'end-date' : 'yesterday',
						},
						chart : {
							type : 'LINE',
							container : 'timeline'
						}
					});

					// Step 6: Hook up the components to work together.

					gapi.analytics.auth.on('success', function(response) {
						viewSelector.execute();
					});

					viewSelector.on('change', function(ids) {
						var newIds = {
							query : {
								ids : ids
							}
						}
						timeline.set(newIds).execute();
					});
				});
	</script>
	<hr>
	<google-analytics-chart type="area" metrics="ga:sessions"
		dimensions="ga:date" startDate="30daysAgo" endDate="yesterday">
	</google-analytics-chart>
	<google-analytics-dashboard>

    <google-analytics-view-selector></google-analytics-view-selector>
    <google-analytics-date-selector></google-analytics-date-selector>

    <google-analytics-chart
      type="area"
      metrics="ga:sessions"
      dimensions="ga:date">
      <h3>Site Traffic</h3>
    </google-analytics-chart>

    <google-analytics-chart
      type="column"
      metrics="ga:avgPageLoadTime"
      dimensions="ga:date">
      <h3>Average Page Load Times</h3>
    </google-analytics-chart>

    <google-analytics-chart
      type="geo"
      metrics="ga:users"
      dimensions="ga:country">
      <h3>Users by Country</h3>
    </google-analytics-chart>

    <google-analytics-chart
      type="pie"
      metrics="ga:pageviews"
      dimensions="ga:browser"
      sort="-ga:pageviews"
      max-results="6">
      <h3>Pageviews by Browser</h3>
    </google-analytics-chart>

  </google-analytics-dashboard>
</body>
</html>
